<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>流程模板节点查询</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <script src="../../../common/common.css.js"></script>
    <style>
        .allFormBox {
            border: 1px solid #eee;
        }

        .senior-box {
            margin: 0;
            border-top: 1px dashed #D3D3D3;
            border-bottom: none;
            padding: 10px 0;
            margin-top: 0;
        }
        .senior-btn{
            background-color: transparent;
        }

        .modal-dialog{
            width:900px;
        }
        #_oldParticipantListGridContainer .ui-jqgrid-hbox{
            margin-top:4px;
        }

        .grid-container div.ui-jqgrid-hbox{
            margin-top:4px;
        }

    </style>
    <!--[if lt IE 9]>
    <script src="https://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.js"></script>
    <![endif]-->
</head>
<body >
<div class="container-fluid news-container">
    <div class="row">
        <div class="col-md-11 col-sm-12 jz">
            <div class="row clearfix tabItem" style="display:block">
                <div class="col-md-12 ">

                    <!-- 查询区域-->
                    <div class="container-fluid xj-main-advanced" style="padding-bottom:10px;">
                        <div class="row clearfix searchTopDiv">
                            <div class="ordinarySearchTitle" >
                                <h2><span class="fa fa-search"></span><span>查询条件</span></h2>
                                <div class="titleRightBox">
                                    <span class="fa fa-angle-down" id="collapseSearchSpan" ></span>
                                    <button class="btn btn-sm btn-adv senior-btn mr0 pull-right" id="advanceSearchBtn" type="button">
                                        <span>高级查询</span>
                                        <i class="fa fa-angle-up" aria-hidden="true"></i>
                                    </button>
                                    <button class="btn btn-sm btn-adv reset-btn pull-right mr0 resetForm" id="resetFormBtn"></button>
                                    <button class="btn btn-sm btn-search rm-pad pull-right" id="searchFormBtn" >
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="allFormBox" id="searchFormContainer">
                                <form class="form-inline" id="searchForm">
                                    <div class="simple-box clearfix">
                                        <table class="table tableContainer generalSearchTab">
                                            <tbody>
                                            <tr>
                                                <td class="seinor-txt">业务系统</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="appId" id="appId" >

                                                    </select>
                                                </td>
                                                <td class="seinor-txt">业务对象</td>
                                                <td class="seinor-ele">
                                                    <div class="input-group form-date">
                                                        <input type="text" class="form-control" id="busiObjectName" name="busiObjectName" readonly placeholder="请选择">
                                                        <input type="hidden" id="busiObjectId" name="busiObjectId">
                                                        <div class="input-group-addon"> <a class="glyphicon glyphicon-remove" ></a></div>
                                                        <span class="input-group-addon w28 ">
                                                            <a class="fa fa-ellipsis-h " href="javascript:void(0);"></a>
								                        </span>
                                                    </div>
                                                </td>

                                                <td class="seinor-txt">流程模版</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="flId" id="flId" title="请选择">
                                                        <option value="">请选择</option>
                                                    </select>
                                                </td>

                                                <td class="seinor-txt">审批类型</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="approveTypeId" id="approveTypeId" title="请选择">
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="seinor-txt">对象类型</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="participantCate" id="participantCate" >
                                                        <option value="">请选择</option>
                                                        <option value="1">人员</option>
                                                        <option value="2">岗位</option>
                                                        <option value="3">标准岗位</option>
                                                        <option value="5">角色</option>
                                                    </select>
                                                </td>

                                                <td class="seinor-txt">查询对象</td>
                                                <td class="seinor-ele">
                                                    <div class="input-group form-date">
                                                        <input type="text" class="form-control" id="participantName" name="participantName" readonly placeholder="请选择" onmouseover="this.title=this.value" >
                                                        <input type="hidden" id="participantId" name="participantId">
                                                        <div class="input-group-addon"> <a class="glyphicon glyphicon-remove" ></a></div>
                                                        <span class="input-group-addon w28 ">
                                                            <a class="fa fa-ellipsis-h " href="javascript:void(0);"></a>
								                        </span>
                                                    </div>
                                                </td>

                                                <td class="seinor-txt">参与人身份</td>
                                                <td class="seinor-ele" >
                                                    <div class="input-group form-date">
                                                        <input type="text" class="form-control" id="participantRole" name="participantRole" readonly placeholder="请选择" onmouseover="this.title=this.value">
                                                        <input type="hidden" id="participantRoleId" name="participantRoleId" value="">
                                                        <div class="input-group-addon"> <a class="glyphicon glyphicon-remove" ></a></div>
                                                        <span class="input-group-addon w28 ">
                                                            <a class="fa fa-ellipsis-h " href="javascript:void(0);"></a>
								                        </span>
                                                    </div>
                                                </td>

                                                <td class="seinor-txt"></td>
                                                <td class="seinor-ele" >
                                                </td>
                                            </tr>

                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="senior-box collapse"  id="exactSearchContainer">
                                        <table class="table tableContainer exactSearchTab">
                                            <tr>
                                                <td class="seinor-txt">岗位为空策略</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="postIsNull" id="postIsNull" >
                                                        <option value="">请选择</option>
                                                        <option value="1">不允许发起</option>
                                                        <option value="2">允许发起，挂起</option>
                                                        <option value="3">允许发起，跳过，并显示该行</option>
                                                        <option value="4">允许发起，跳过，不显示该行</option>
                                                    </select>
                                                </td>

                                                <td class="seinor-txt">审批人为空策略</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="approvalPersonIsNull" id="approvalPersonIsNull" >
                                                        <option value="">请选择</option>
                                                        <option value="1">不允许发起</option>
                                                        <option value="2">允许发起，挂起</option>
                                                        <option value="3">允许发起，跳过，并显示该行</option>
                                                        <option value="4">允许发起，跳过，不显示该行</option>
                                                    </select>
                                                </td>

                                                <td class="seinor-txt">多岗位审批策略</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="approveStrategy" id="approveStrategy" >
                                                        <option value="">请选择</option>
                                                        <option value="1">抢占</option>
                                                        <option value="2">串行</option>
                                                        <option value="3">并行</option>
                                                    </select>
                                                </td>

                                                <td class="seinor-txt">审批人设置方式</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="isAddLabel" id="isAddLabel" >
                                                        <option value="">请选择</option>
                                                        <option value="0">在模板环节中设置</option>
                                                        <option value="1">流程发起时，由发起人指定审批人</option>
                                                    </select>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td class="seinor-txt">是否必须指定审批人</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="isStart" id="isStart" >
                                                        <option value="">请选择</option>
                                                        <option value="0">可以不指定审批人，依旧可以发起流程</option>
                                                        <option value="1">必须指定审批人，否则不允许发起流程</option>
                                                    </select>
                                                </td>

                                                <td class="seinor-txt">同岗位多人审批策略</td>
                                                <td class="seinor-ele">
                                                    <select class="form-control" onmouseover="this.title=this.options[this.selectedIndex].text" name="postMultiPerson" id="postMultiPerson" >
                                                        <option value="">请选择</option>
                                                        <option value="1">抢占</option>
                                                        <option value="3">并行</option>
                                                    </select>
                                                </td>

                                                <td class="seinor-txt">模板修改时间</td>
                                                <td class="seinor-ele" colspan="3">
                                                    <div class="input-group date end-time-date form-date startDate" style="width: 40%;float: left;">
                                                        <input class="form-control" id="beginTime" size="16" type="text" name="beginTime" readonly>
                                                        <span class="input-group-addon" ><span class="glyphicon glyphicon-th"></span></span>
                                                    </div>
                                                    <span class="input-group-addon" style="float:left;padding:6px;margin:0 10px;">至</span>
                                                    <div class="input-group date end-time-date form-date endDate" style="width: 40%;float: left;">
                                                        <input class="form-control" id="endTime" size="16" type="text" name="endTime" readonly>
                                                        <span class="input-group-addon" ><span class="glyphicon glyphicon-th"></span></span>
                                                    </div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td class="seinor-txt">模板修改人</td>
                                                <td class="seinor-ele">
                                                    <div class="input-group form-date">
                                                        <input type="text" class="form-control" id="modifyPersonName" name="modifyPersonName" readonly placeholder="请选择">
                                                        <input type="hidden" id="modifyPersonId" name="modifyPersonId">
                                                        <div class="input-group-addon"> <a class="glyphicon glyphicon-remove" ></a></div>
                                                        <span class="input-group-addon w28 ">
                                                            <a class="fa fa-ellipsis-h " href="javascript:void(0);"></a>
								                        </span>
                                                    </div>
                                                </td>

                                                <td class="seinor-txt"></td>
                                                <td class="seinor-ele" colspan="5">
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- -->

                    <div class="xj-main-dimsearch container-fluid" id="buttonBox">
                        <div class="form-inline clearfix">
                            <div class="form-group pull-left">
                                <!--<input type="text" class="form-control" id="keywords" name="keywords" placeholder="流程模板名称">
                                <button type="button" class="btn btn-sm btn-dim rm-pad" id="fuzzySearchBtn"><i
                                        class="fa fa-search" aria-hidden="true"></i></button>-->

                            </div>
                            <div class="pull-right my-btn-group" id="contentRowTypeBtnContainer">
                                <!-- <button type="button" class="btn btn-sm btn-default" id="collectBtn">收藏</button>-->
                                <button type="button" class="btn btn-sm btn-default" id="updateAttrBtn">修改环节属性</button>
                                <!--<button type="button" class="btn btn-sm btn-default" id="delAcBtn">删除环节</button>-->
                                <button type="button" class="btn btn-sm btn-default" id="replaceApproverBtn">替换审批人</button>
                                <!--<button type="button" class="btn btn-sm btn-default" id="preAddAcBtn">插入环节（前置）</button>
                                <button type="button" class="btn btn-sm btn-default" id="lastAddAcBtn">插入环节（后置）</button>-->
                                <!--<button type="button" class="btn btn-sm btn-default" id="downBtn">上移</button>
                                <button type="button" class="btn btn-sm btn-default" id="upBtn">下移</button>

                                <div class="btn-group more">
                                    <button type="button" class="btn btn-sm dropdown-toggle" data-toggle="dropdown">更多
                                        <span class="caret"></span></button>
                                    <ul class="dropdown-menu" role="more">
                                        &lt;!&ndash; <li><a href="javascript:void(0)" id="authBtn">修改权限</a></li>&ndash;&gt;
                                        <li><a href="javascript:void(0)" id="transBtn">分类转移</a></li>
                                        <li><a href="javascript:void(0)" id="unPublishBtn">取消发布</a></li>
                                        <li><a href="javascript:void(0)" id="unStickBtn">取消置顶</a></li>
                                        <li><a href="javascript:void(0)" id="checkApprovalBtn">查看审批</a></li>
                                    </ul>
                                </div>-->
                            </div>
                        </div>
                    </div>
                    <div class="grid-container">
                        <table id="flAcListGrid" constraint-layout="true"></table>
                        <div id="pagered"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--参与人身份-->
<div class="modal fade in" id="participantRoleModal" data-backdrop="static" role="dialog" style="display: none; height: 475px; overflow: hidden; position: fixed;">
    <div class="modal-dialog modal-tree" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h6 class="modal-title" id="treeModalLabel"><i class="fa fa-sitemap" aria-hidden="true"></i><span>参与人身份</span></h6>
                <input type="text" class="form-control modalInput" placeholder="输入关键词查询...">
                <button class="btn btn-sm btnMsearch rm-pad"><i class="fa fa-search" aria-hidden="true"></i></button>
                <button class="btn btn-sm blue pull-right mr20" id="selectParticipantRoleBtn">确定</button>
            </div>
            <div class="modal-body">
                <div class="treeContainer selector-model-tree" style="height: 350px; "
                     tabindex="6">
                    <ul class="ztree" id="participantRoleTree">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!--环节属性-->
<div class="modal fade" id="acAttrModal" tabindex="-1" role="dialog" aria-labelledby="acAttrModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title" id="acAttrModalLabel">修改环节属性</h5>
            </div>
            <div class="modal-body">
                <form class="form-inline" id="updateAccAttrForm">
                    <div class="xj-form-content xj-form-single">
                        <table class="table table-bordered">
                            <tbody>
                            <tr class="form-tr">
                                <td class="form-label"><label>岗位为空策略 :</label></td>
                                <td>
                                    <select class="form-control addInputWidth" onmouseover="this.title=this.options[this.selectedIndex].text" name="postIsNull" id="postIsNullForUpdate" >
                                        <option value="">不做修改</option>
                                        <option value="1">不允许发起</option>
                                        <option value="2">允许发起，挂起</option>
                                        <option value="3">允许发起，跳过，并显示该行</option>
                                        <option value="4">允许发起，跳过，不显示该行</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="form-tr">
                                <td class="form-label"><label>审批人为空策略 :</label></td>
                                <td>
                                    <select class="form-control addInputWidth" onmouseover="this.title=this.options[this.selectedIndex].text" name="approvalPersonIsNull" id="approvalPersonIsNullForUpdate" >
                                        <option value="">不做修改</option>
                                        <option value="1">不允许发起</option>
                                        <option value="2">允许发起，挂起</option>
                                        <option value="3">允许发起，跳过，并显示该行</option>
                                        <option value="4">允许发起，跳过，不显示该行</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="form-tr">
                                <td class="form-label"><label>多岗位审批策略 :</label></td>
                                <td>
                                    <select class="form-control addInputWidth" onmouseover="this.title=this.options[this.selectedIndex].text" name="approveStrategy" id="approveStrategyForUpdate" >
                                        <option value="">不做修改</option>
                                        <option value="1">抢占</option>
                                        <option value="2">串行</option>
                                        <option value="3">并行</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="form-tr">
                                <td class="form-label">同岗位多人审批策略 :</td>
                                <td >
                                    <select class="form-control addInputWidth" onmouseover="this.title=this.options[this.selectedIndex].text" name="postMultiPerson" id="postMultiPersonForUpdate" >
                                        <option value="">不做修改</option>
                                        <option value="1">抢占</option>
                                        <option value="3">并行</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="form-tr">
                                <td class="form-label">审批人设置方式 :</td>
                                <td >
                                    <select class="form-control addInputWidth" onmouseover="this.title=this.options[this.selectedIndex].text" name="isAddLabel" id="isAddLabelForUpdate" >
                                        <option value="">不做修改</option>
                                        <option value="0">在模板环节中设置</option>
                                        <option value="1">流程发起时，由发起人指定审批人</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="form-tr" style="display: none;">
                                <td class="form-label">是否必须指定审批人 :</td>
                                <td >
                                    <select class="form-control addInputWidth" onmouseover="this.title=this.options[this.selectedIndex].text" name="isStart" id="isStartForUpdate" >
                                        <option value="">不做修改</option>
                                        <option value="0">可以不指定审批人，依旧可以发起流程</option>
                                        <option value="1">必须指定审批人，否则不允许发起流程</option>
                                    </select>
                                </td>
                            </tr>

                            </tbody>
                        </table>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-sm blue" id="saveAcAttrBtn">确定</button>
                <button type="button" class="btn btn-sm opacity" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>

<!--替换审批人-->
<div class="modal fade" id="participantModal" tabindex="-1" role="dialog" aria-labelledby="participantModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title" id="participantModalLabel">修改环节属性</h5>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="row" style="">
                        <div class="col-sm-12">
                            <!-- 基本信息 -->
                            <div class="xj-form-content">

                                <!--抄送人-->
                                <div id="copyForPartnerDiv">
                                    <div class="xj-form-tab mt20 container-fluid">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <i class="fa fa-list addBlue" aria-hidden="true"></i> <span
                                                    class="form-title">原审批人列表</span>
                                            </div>
                                            <div class="col-md-9 btns-group addTop">
                                                <!--<button type="button" class="btn btn-sm" id="deleteCopyForPartnerBtn">删除</button>-->
                                                <button type="button" class="btn btn-sm" id="clearNewAddPartnerBtn">清除替换</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="xj-form-content" id="_oldParticipantListGridContainer" >
                                        <table id="_oldParticipantListGrid" class="table table-bordered" style="margin-bottom:0px;">
                                        </table>
                                    </div>
                                </div>

                                <!--审批人-->
                                <div id="approvePartnerDiv">
                                    <div class="xj-form-tab mt20 container-fluid">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <i class="fa fa-list addBlue" aria-hidden="true"></i> <span
                                                    class="form-title">流程模板审批人设置</span>
                                            </div>
                                            <div class="col-md-9 btns-group addTop">
                                                <!--<button type="button" class="btn btn-sm" id="toBottomBtn" >置底</button>
                                                <button type="button" class="btn btn-sm" id="toTopBtn" >置顶</button>
                                                <button type="button" class="btn btn-sm" id="downRowBtn">下移</button>
                                                <button type="button" class="btn btn-sm" id="upRowBtn">上移</button>
                                                <button type="button" class="btn btn-sm" id="deleteApprovePartnerBtn">删除</button>-->
                                                <button type="button" class="btn btn-sm" id="addApprovePartnerBtn">添加</button>
                                                <button type="button" class="btn btn-sm" id="replaceApprovePartnerBtn">替换</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="xj-form-content" >
                                        <table id="_approvePartnerTb" class="table table-bordered" style="margin-bottom:0px;">
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-sm blue" id="saveParticipantBtn">确定</button>
                <button type="button" class="btn btn-sm opacity" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="../../../common/common.js?v=1.0.0"></script>
<script type="text/javascript" src="../../../common/My97DatePicker/WdatePicker.js?v=1.0.0"></script>
<script type="text/javascript" src="../../../common/utils/xlj-attachment-plugin.js?v=1.0.1"></script>
<script type="text/javascript" src="flCommon.js"></script>
<script src="flAc_list.js"></script>

</body>
</html>

